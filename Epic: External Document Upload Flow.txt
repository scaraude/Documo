**Epic: External Document Upload Flow**

Frontend Tickets:

1. **Request Detail Enhancement**
```
Title: Add external upload link to request detail/accordion
Description:
- Add "Share Upload Link" button in request detail view
- Add external link icon and button in request accordion
- Generate shareable link with request ID
- Add copy link functionality
Priority: High
Dependencies: None
```

2. **External Request Page**
```
Title: Create external request review page
Description:
- Create new route /external/requests/:id
- Display request details (civil ID, requested documents)
- Show accept/decline buttons
- Match notification page styling
- Handle unauthorized access
Priority: High
Dependencies: Ticket 1
```

3. **External Upload UI**
```
Title: Create external document upload page
Description:
- Create new route /external/upload/:requestId
- Replicate existing upload UI for external use
- Show upload progress and completion status
- Handle session management for external users
Priority: High
Dependencies: Ticket 2
```

Backend/API Tickets:

4. **API Routes**
```
Title: Add external API endpoints
Description:
- Add /api/external/requests/:id endpoint
- Add /api/external/upload endpoint
- Implement request validation
- Handle anonymous access security
Priority: High
Dependencies: None
```

5. **Authentication Flow**
```
Title: Implement external access authentication
Description:
- Create temporary access tokens for external links
- Implement token validation
- Handle expired/invalid tokens
- Set up session management for upload flow
Priority: High
Dependencies: Ticket 4
```

Path Updates Required:
```typescript
// Add to ROUTES object:
EXTERNAL: {
    REQUEST: (id: string) => `/external/requests/${id}`,
    UPLOAD: (requestId: string) => `/external/upload/${requestId}`,
},
API: {
    // Add to existing API routes:
    EXTERNAL: {
        REQUEST: (id: string) => `/api/external/requests/${id}`,
        UPLOAD: '/api/external/upload',
    }
}
```

Testing Tickets:

6. **Integration Testing**
```
Title: Add integration tests for external flow
Description:
- Test external link generation
- Test request viewing flow
- Test accept/decline flow
- Test upload flow
- Test error scenarios and token expiration
Priority: Medium
Dependencies: Tickets 1-5
```

7. **Security Testing**
```
Title: Security audit for external access
Description:
- Test token security
- Validate access controls
- Check for potential vulnerabilities
- Verify file upload security
Priority: High
Dependencies: Tickets 4-5
```

Order of Implementation:
1. Backend API endpoints and authentication (Tickets 4-5)
2. Request detail enhancement (Ticket 1)
3. External pages (Tickets 2-3)
4. Testing (Tickets 6-7)

This breakdown ensures a systematic approach to implementing the external document upload feature while maintaining security and user experience. Each ticket is independent enough to be worked on separately but maintains the necessary dependencies for integration.

The feature uses much of the existing notification and document upload infrastructure, but adds the external access layer and dedicated UI flows for unauthenticated users.I'll help break down the UI flow into tickets for implementing the external document submission feature. Let's organize them by epics and user stories:

Epic: External Document Submission Flow

1. **Authentication Integration Tickets**
```
TICKET-1: Set up FranceConnect Authentication
- Implement FranceConnect authentication flow
- Create authentication middleware
- Add fallback email + code authentication method
Priority: High
```

2. **Request Access Tickets**
```
TICKET-2: Create External Request Access Link
- Add "Share Link" button in RequestAccordion and RequestDetails
- Generate unique, secure access links for document requests
- Implement link validation and expiration logic
Priority: High

TICKET-3: External Request Landing Page
- Create new route for external access (/external/requests/[id])
- Design and implement landing page for external users
- Show request summary before authentication
Priority: High
```

3. **Document Upload Flow Tickets**
```
TICKET-4: Document Request Overview Page
- Create overview page showing all required documents
- Display document status (missing/uploaded)
- Show request details and deadline
Priority: High

TICKET-5: Document Upload Interface
- Implement drag-and-drop upload zones for each required document
- Add document type validation
- Show upload progress and status
Priority: High

TICKET-6: Document Upload Confirmation
- Create success confirmation page
- Show uploaded documents summary
- Add "Documents submitted successfully" message
- Include information about future reuse of documents
Priority: Medium
```

4. **Document Management Tickets**
```
TICKET-7: Document Storage and Organization
- Implement secure document storage system
- Create document versioning system
- Link documents to user profiles for future reuse
Priority: High

TICKET-8: Document Verification System
- Add document validation checks
- Implement document processing queue
- Create admin verification interface
Priority: Medium
```

5. **User Experience Tickets**
```
TICKET-9: Progress Tracking
- Add progress indicator for document uploads
- Create status notifications
- Implement email notifications for status changes
Priority: Medium

TICKET-10: Mobile Responsiveness
- Ensure responsive design for all new pages
- Optimize upload interface for mobile devices
- Test and fix mobile-specific issues
Priority: Medium
```

6. **Security and Privacy Tickets**
```
TICKET-11: Security Implementation
- Implement secure document handling
- Add encryption for document storage
- Create access control system
Priority: High

TICKET-12: Privacy Controls
- Implement data retention policies
- Add user consent management
- Create privacy policy documentation
Priority: High
```

Dependencies and Flow:
1. TICKET-1 will be completed last
2. TICKET-2 and TICKET-3 can be done in parallel
3. TICKET-4, TICKET-5, and TICKET-6 form the core upload flow and should be implemented sequentially
4. TICKET-7 and TICKET-8 can be implemented in parallel with the upload flow
5. TICKET-9 and TICKET-10 should be implemented alongside the main features
6. TICKET-11 and TICKET-12 should be implemented before the feature goes live

Would you like to start implementing any specific ticket from this breakdown?